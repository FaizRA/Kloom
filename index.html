<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Homepage</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.css">
    <link rel="stylesheet" href="style/style.css">
</head>

<body>
    <!--nav-->
    <nav class="navbar navbar-expand-lg top-nav">
        <div class="container">
            <a href="#"><img class="navbar-brand mx-auto" src="asset/weblogo.png" alt=""></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li>
                        <a href="#">Home</a>
                    </li>
                    <li>
                        <a href="#">How To Shop</a>
                    </li>
                    <li>
                        <a href="#">Track</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!--nav-->

    <!--above the fold-->
    <div class="container banner">
        <div class="row">
            <div class="col-md-5 col-sm-12 title">
                <div class="centering">
                    <h1 class="">
                        Every Day <br>
                        Premium <br>
                        Clogs <br>
                    </h1>
                </div>
            </div>
            <div class="col-md-7 col-sm-12 banner-img">
                <div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img class="" src="asset/banner/baner (1).JPG" alt="First slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (2).JPG" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (3).JPG" alt="Third slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (4).JPG" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (5).JPG" alt="Third slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (6).JPG" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (7).JPG" alt="Third slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (8).JPG" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (9).JPG" alt="Third slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (10).JPG" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (11).JPG" alt="Third slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (12).JPG" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (13).JPG" alt="Third slide">
                        </div>
                        <div class="carousel-item">
                            <img class="" src="asset/banner/baner (14).JPG" alt="Third slide">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--above the fold-->

    <!--content-->
    <div class="container content-products">
        <div class="row products-row">
            <div class="product-container">
                <img class="product-image" src="asset/produk/15.png" alt="">
                <div class="infos">
                    <div class="info-base"> </div>
                    <div class="product-info">
                        <p>Name : Venezuela</p>
                        <p>Price : RP. 350.000,00</p>
                        <button type="button" class="btn">Detail</button>
                    </div>
                </div>
            </div>
            <div class="product-container">

            </div>
            <div class="product-container">

            </div>
            <div class="product-container">

            </div>
            <div class="product-container">

            </div>
        </div>
    </div>
    <!--content-->

    <!--content-pagination-->

    <nav aria-label="Page navigation example" id="pagination">
        <ul class="pagination justify-content-center" id="pagination_isi">
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1">Previous</a>
            </li>
            <li class="page-item"><a class="page-link" href="#page_1">1</a></li>
            <li class="page-item"><a class="page-link" href="#page_2">2</a></li>
            <li class="page-item"><a class="page-link" href="#page_3">3</a></li>
            <li class="page-item">
                <a class="page-link" href="#">Next</a>
            </li>
        </ul>
    </nav>


    <!--content-pagination-->

    <!--Product Detail-->
    <div class="product-detail">
        <div class="product-detail-canvas" id="canvas"> </div>
        <div class="container product-detail-card">
            <div class="close-button">
                <i class="far fa-times-circle" id="tutup"></i>
            </div>
            <div class="row">
                <!--IMAGE-->
                <div class="col-md-6 col-sm-12">
                    <div class="row">
                        <div class="col-12 main-image">
                            <img src="/asset/produk/15.png" alt="">
                        </div>
                        <div class="col-12 gallery">
                            <div class="gallery-image">
                                <img src="/asset/produk/15.1.png" alt="">
                            </div>
                            <div class="gallery-image">
                                <img src="/asset/produk/15.2.png" alt="">
                            </div>
                            <div class="gallery-image">
                                <img src="/asset/produk/15.3.png" alt="">
                            </div>
                            <div class="gallery-image">
                                <img src="/asset/produk/15.4.png" alt="">
                            </div>
                            <div class="gallery-image">
                                <img src="/asset/produk/15.5.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <!--Product Detail-->
                <div class="col-md-6 col-sm-12">
                    <div class="p-info">
                        <div class="p-nama">
                            <p>Product : Boot 15</p>
                        </div>
                        <div class="p-kategori">
                            <p>Category : Boot</p>
                        </div>
                        <div class="p-harga">
                            <p>Price : Rp 650.000,00</p>
                        </div>
                        <div class="p-detail">
                            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores unde ratione, itaque,
                                iusto
                                debitis dolor quisquam possimus rem reiciendis cum, molestiae porro? Unde voluptatum
                                odio
                                totam quisquam! Perferendis, cupiditate harum?</p>
                        </div>
                        <button class="btn btn-success"><i class="fab fa-whatsapp"></i> Order Via WhatsApp</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Product Detail-->

    <!--JS-->
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script>
        $(function () {


            var item_per_page = 12;

            //BOOTSRAP SLIDER BANNER
            $('.carousel').carousel({
                interval: 3000
            });








            //FUNCTION PAGINATION
            function paginate(page) {
                // console.log(produk_jsobj)
                //console.log(produk_jsobj.list.length);
                //console.log(produk_jsobj.list[4]);
                //console.log(produk_jsobj.list[4].produk);
                //console.log(produk_jsobj.list[4].galeri[0].image);



                var selisih_item = item_per_page - 1;
                var last_item = (item_per_page * page);
                var first_item = last_item - selisih_item;
                $(".product-container").remove();
                closedetail();

                for (i = first_item - 1; i <= last_item - 1; i++) {

                    if (i + 1 > produk_jsobj.list.length) {
                        console.log("item habis")
                    } else {
                        console.log(i)
                        $(".products-row").append(
                            [
                                '<div class="product-container">',
                                '<img class="product-image" src="' + produk_jsobj.list[i].image + '" alt="">',
                                '<div class="infos">',
                                '<div class="info-base"> </div>',
                                '<div class="product-info">',
                                '<p>Name : ' + produk_jsobj.list[i].produk + '</p>',
                                '<p>Price : RP. ' + produk_jsobj.list[i].harga + '</p>',
                                '<a href="#produk_' + produk_jsobj.list[i].id + '" type="button" class="btn">Detail</a>',
                                '</div>',
                                '</div>',
                                '</div>'
                            ].join('')
                        );

                    }
                }
            }

            //FUNCTION PRODUK DETAIL
            function detailproduk(id) {

                var produknow = {};
                var galeri_image = {}
                for (i = 0; i < produk_jsobj.list.length; i++) {
                    if (produk_jsobj.list[i].id == id) {
                        produknow.nama = produk_jsobj.list[i].produk;
                        produknow.harga = produk_jsobj.list[i].harga;
                        produknow.kategori = produk_jsobj.list[i].kategori;
                        produknow.harga = produk_jsobj.list[i].harga;
                        produknow.image = produk_jsobj.list[i].image;
                        produknow.detail = produk_jsobj.list[i].detail;
                        produknow.galerilenght = produk_jsobj.list[i].galeri.length;


                        for (j = 0; j < produknow.galerilenght; j++) {
                            // produknow.galeri[j] = produk_jsobj.list[i].galeri[j].image
                            galeri_image[j] = {
                                image: produk_jsobj.list[i].galeri[j].image
                            }
                        }

                    }

                }
                console.log(produknow)
                console.log(galeri_image)

                var url_now = window.location;
                var encoded_url = encodeURIComponent(url_now);
                //  alert(encoded_url)

                $("body").append(
                    [
                        '<div class="product-detail">',
                        '<div class="product-detail-canvas" id="canvas">', '</div>',
                        '<div class="container product-detail-card">',
                        '<div class="close-button">',
                        '<i class="far fa-times-circle" id="tutup">', '</i>',
                        '</div>',
                        '<div class="row">',
                        '<!--IMAGE-->',
                        '<div class="col-md-6 col-sm-12">',
                        '<div class="row">',
                        '<div class="col-12 main-image">',
                        '<img class="zoom" src="' + produknow.image + '" alt="">',
                        '</div>',
                        '<div class="col-12 gallery" id="gallery">',

                        '</div>',
                        '</div>',
                        '</div>',
                        '<!--Product Detail-->',
                        '<div class="col-md-6 col-sm-12">',
                        '<div class="p-info">',
                        '<div class="p-nama">',
                        '<p>Produk : ' + produknow.nama + '</p>',
                        '</div>',
                        '<div class="p-kategori">',
                        '<p>Kategori : ' + produknow.kategori + '</p>',
                        '</div>',
                        '<div class="p-harga">',
                        '<p>Price : Rp. ' + produknow.harga + '</p>',
                        '</div>',
                        '<div class="p-detail">',
                        '<p> ' + produknow.detail + ' </p>',
                        '</div>',
                        '<a href="https://wa.me/628989019089?text=saya%20minat%20produk%20ini%20' + encoded_url + '" class="btn btn-success">', '<i class="fab fa-whatsapp">', '</i> Order Via WhatsApp</a>',
                        '<div class="p-detail">',
                        '<p> Atau hubungi <br> Telepon/WA : 0858 1118 7633 </p>',
                        '</div>',
                        '</div>',
                        '</div>',
                        '</div>',
                        '</div>',
                        '</div>',
                    ].join('')
                );
                //alert(window.location + '%20kaja')
                window.location.href = '#canvas';
                if (produknow.galerilenght > 0) {
                    for (i = 0; i < produknow.galerilenght; i++) {
                        $(
                            [

                                '<div class="gallery-image">',
                                '<img class="zoom-gallery" src="' + galeri_image[i].image + '" alt="">',
                                '</div>',

                            ].join('')
                        ).appendTo("#gallery");
                    }
                }




            }

            //FUNCTION HASH 
            var hash;
            var halaman;
            function hashprogress() {

                halaman = Math.ceil(produk_jsobj.list.length / item_per_page);
                // alert(halaman)

                hash = $(location).attr('hash');
                //console.log(hash);
                if (hash.includes("page")) {
                    var current_page = hash.replace('#page_', '');
                    if (current_page < 1) {
                        current_page = 1;
                    } if (current_page > halaman) {
                        current_page = 1;
                        alert("halaman tidak ditemukan, kembalike halaman 1")
                    }
                    //console.log(current_page);
                    paginate(current_page);
                    paginationkus(current_page, halaman);
                } else if (hash.includes("produk")) {
                    var produkId = hash.replace('#produk_', '');
                    detailproduk(produkId)


                }
            }

            //FUNCTION PAGINATION
            function paginationkus(current_page, halaman) {
                console.log(current_page + halaman)
                $("#pagination_isi").remove();
                //Append Paginationa Nav
                $("#pagination").append(
                    [
                        '<ul class="pagination justify-content-center" id="pagination_isi">',

                        '</ul>',
                    ].join('')
                );

                var next = parseInt(current_page) + 1;
                var prev = parseInt(current_page) - 1;
                console.log(current_page)
                console.log(halaman)
                console.log(next)
                console.log(prev)

                if (current_page == 1) {
                    console.log('halaman' + current_page)
                    //Append Prev
                    $(
                        [

                            '<li class="page-item disabled">',
                            '<a class="page-link" href="#page_' + prev + '">Prev</a>',
                            '</li>',
                        ].join('')
                    ).appendTo("#pagination_isi");
                    //Append Current Page 
                    $(
                        [
                            '<li class="page-item disabled"><a class="page-link" href="#page_' + current_page + '">' + current_page + '</a></li>',
                        ].join('')
                    ).appendTo("#pagination_isi");
                    //Append Next
                    $(
                        [
                            '<li class="page-item">',
                            '<a class="page-link" href="#page_' + next + '">Next</a>',
                            '</li>',

                        ].join('')
                    ).appendTo("#pagination_isi");

                } else if (current_page == halaman) {
                    console.log('halaman' + current_page)
                    //Append Prev
                    $(
                        [

                            '<li class="page-item">',
                            '<a class="page-link" href="#page_' + prev + '">Prev</a>',
                            '</li>',
                        ].join('')
                    ).appendTo("#pagination_isi");
                    //Append Current Page 
                    $(
                        [
                            '<li class="page-item disabled"><a class="page-link" href="#page_' + current_page + '">' + current_page + '</a></li>',
                        ].join('')
                    ).appendTo("#pagination_isi");
                    //Append Next
                    $(
                        [
                            '<li class="page-item disabled">',
                            '<a class="page-link" href="#page_' + next + '">Next</a>',
                            '</li>',

                        ].join('')
                    ).appendTo("#pagination_isi");

                } else {
                    console.log('halaman' + current_page)
                    //Append Prev
                    $(
                        [

                            '<li class="page-item">',
                            '<a class="page-link" href="#page_' + prev + '">Prev</a>',
                            '</li>',
                        ].join('')
                    ).appendTo("#pagination_isi");
                    //Append Current Page 
                    $(
                        [
                            '<li class="page-item disabled"><a class="page-link" href="#page_' + current_page + '">' + current_page + '</a></li>',
                        ].join('')
                    ).appendTo("#pagination_isi");
                    //Append Next
                    $(
                        [
                            '<li class="page-item">',
                            '<a class="page-link" href="#page_' + next + '">Next</a>',
                            '</li>',

                        ].join('')
                    ).appendTo("#pagination_isi");
                }



            }


            //Close Detail Trigger

            $(document).on('click', '#canvas', function () {
                closedetail();
                location.hash = "";
            });

            $(document).on('click', '#tutup', function () {
                closedetail();
                location.hash = "";
            });




            //FUNCTION CLOSE DETAIL
            function closedetail() {
                $(".product-detail").remove();
            }

            //JSON REQUEST
            var xhttp = new XMLHttpRequest();
            var produk_json;
            var produk_jsobj;
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    // Typical action to be performed when the document is ready:
                    // console.log(xhttp.responseText);
                    produk_json = xhttp.responseText; //take json value
                    produk_jsobj = JSON.parse(produk_json); // parse json to jav obj
                    // console.log(produk_jsobj[0])

                    doSomething()
                }
            };
            xhttp.open("GET", "product.json", true);
            xhttp.send();


            //FUNCTION SETELAH LOAD JSON
            function doSomething() {

                //CHECKING URL
                $(window).on('hashchange', function (e) {
                    hashprogress();
                });


                //INITIALIZE FIRST PAGE first time load
                // paginate(1);
                hash1 = $(location).attr('hash');
                if (hash1.includes("produk")) {
                    //alert(hash1)
                    var Id = hash1.replace('#produk_', '');
                    paginate(1)
                    detailproduk(Id)
                    paginationkus();
                } else {
                    paginate(1);
                    current_page = 1;
                    halaman = Math.ceil(produk_jsobj.list.length / item_per_page);
                    paginationkus(current_page, halaman);
                }



            }


        })
    </script>
</body>

</html>